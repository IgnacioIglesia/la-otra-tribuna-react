/* src/components/Drawer/MobileDrawer.css */
:root{
  --ring:#e5e7eb;
  --bg:#fff;
}

/* ===== Drawer: siempre por encima de todo ===== */
.lot-drawer{
  position: fixed;
  inset: 0;
  z-index: 6000;
  pointer-events: none;
}
.lot-drawer.open{
  pointer-events: auto;
}

/* Backdrop */
.drawer-backdrop{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.5);
  opacity: 0;
  transition: opacity .25s ease;
}
.lot-drawer.open .drawer-backdrop{ opacity: 1; }

/* Panel - ARREGLADO EL CORTE DE ARRIBA */
.drawer-panel{
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height - mejor para móviles */
  width: 85%;
  max-width: 340px;
  background: var(--bg);
  transform: translateX(-100%);
  transition: transform .28s ease;
  box-shadow: 4px 0 18px rgba(0,0,0,.20);
  z-index: 6001;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  /* Safe areas para dispositivos con notch */
  padding-top: env(safe-area-inset-top, 0);
  padding-bottom: env(safe-area-inset-bottom, 0);
}
.lot-drawer.open .drawer-panel{ transform: translateX(0); }

/* Head - ARREGLADO PADDING SUPERIOR */
.drawer-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 14px 16px;
  /* Agregar padding extra si hay safe area */
  padding-top: max(14px, calc(env(safe-area-inset-top, 0px) + 10px));
  border-bottom:1px solid var(--ring);
  font-weight:600;
  background: var(--bg);
  /* Sticky para que se vea siempre */
  position: sticky;
  top: 0;
  z-index: 10;
}

/* Contenedor del buscador */
.drawer-search {
  padding: 16px;
  border-bottom: 1px solid var(--ring);
  background: #f9fafb;
}

/* Ajustar el SearchBar dentro del drawer */
.drawer-search .search-bar {
  max-width: 100%;
}

.drawer-search .search-input-container {
  height: 42px;
  padding: 6px 12px;
}

.drawer-search .search-input {
  font-size: 14px;
}

.drawer-search .search-input::placeholder {
  font-size: 14px;
}

/* Ajustar el dropdown de resultados en el drawer */
.drawer-search .search-results-panel {
  max-height: 300px;
}

.drawer-list{
  list-style:none;
  margin:0;
  padding:8px 0 16px;
  /* Agregar padding inferior para safe area */
  padding-bottom: max(16px, calc(env(safe-area-inset-bottom, 0px) + 16px));
}

/* Estilo para los links */
.drawer-link{
  display:block;
  padding:12px 16px;
  color:#111;
  text-decoration:none;
  border-radius:8px;
  background: none;
  border: none;
  font: inherit;
  cursor: pointer;
  text-align: left;
  width: 100%;
  font-size: 15px;
  transition: background 0.15s ease;
}

.drawer-link:hover{ 
  background:#f6f6f7; 
}

/* ===================================
   IMPOSTOR ITEM - DESTACADO
   =================================== */

.drawer-link-impostor {
  background: linear-gradient(135deg, rgba(10, 61, 12, 0.08) 0%, rgba(45, 122, 50, 0.1) 100%);
  border: 1px solid rgba(168, 255, 120, 0.3);
  margin: 4px 8px;
  width: calc(100% - 16px);
  border-radius: 12px;
}

.drawer-link-impostor:hover {
  background: linear-gradient(135deg, rgba(10, 61, 12, 0.15) 0%, rgba(45, 122, 50, 0.18) 100%);
  border-color: rgba(168, 255, 120, 0.5);
}

.drawer-link-impostor span:first-child {
  color: #0a3d0c;
  font-weight: 700;
}

/* Emoji animado */
.impostor-emoji {
  display: inline-block;
  font-size: 1.2rem;
  animation: emojiWiggle 2.5s ease-in-out infinite;
}

@keyframes emojiWiggle {
  0%, 100% { transform: rotate(0deg) scale(1); }
  25% { transform: rotate(-10deg) scale(1.1); }
  75% { transform: rotate(10deg) scale(1.1); }
}

/* Cerrar button */
.drawer-head button {
  background: transparent;
  border: none;
  font-size: 20px;
  cursor: pointer;
  padding: 4px 8px;
  color: #6b7280;
  border-radius: 6px;
  transition: background 0.15s ease;
}

.drawer-head button:hover {
  background: #f3f4f6;
  color: #111827;
}

/* Reduce motion para accesibilidad */
@media (prefers-reduced-motion: reduce){
  .drawer-backdrop,
  .drawer-panel{ transition: none; }
  
  .impostor-emoji {
    animation: none;
  }
}

/* Ajustes específicos para pantallas muy pequeñas */
@media (max-width: 360px) {
  .drawer-panel {
    width: 90%;
    max-width: 300px;
  }

  .drawer-search {
    padding: 12px;
  }

  .drawer-head {
    padding: 12px;
    padding-top: max(12px, calc(env(safe-area-inset-top, 0px) + 8px));
  }

  .drawer-link {
    padding: 10px 12px;
    font-size: 14px;
  }

  .drawer-link-impostor {
    margin: 4px 6px;
    width: calc(100% - 12px);
  }
}

/* ===================================
   iOS SPECIFIC - SAFE AREAS
   =================================== */

@supports (padding-top: env(safe-area-inset-top)) {
  .drawer-panel {
    /* Asegura que el contenido no se corte con el notch */
    padding-top: env(safe-area-inset-top);
  }
  
  .drawer-head {
    padding-top: calc(14px + env(safe-area-inset-top));
  }
  
  .drawer-list {
    padding-bottom: calc(16px + env(safe-area-inset-bottom));
  }
}

/* Para dispositivos con notch específicamente */
@media screen and (min-device-width: 375px) and (max-device-width: 812px) and (-webkit-device-pixel-ratio: 3) {
  .drawer-head {
    padding-top: calc(14px + constant(safe-area-inset-top)); /* iOS 11 */
    padding-top: calc(14px + env(safe-area-inset-top)); /* iOS 11.2+ */
  }
}